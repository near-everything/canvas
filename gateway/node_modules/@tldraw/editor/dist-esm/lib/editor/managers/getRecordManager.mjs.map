{
  "version": 3,
  "sources": ["../../../../src/lib/editor/managers/getRecordManager.ts"],
  "sourcesContent": ["import { Atom, computed } from '@tldraw/state'\n\nexport function getAtomManager<T extends { [key: string]: any }>(\n\tatom: Atom<T>,\n\ttransform?: (prev: T, next: T) => T\n): T {\n\tconst update = (value: Partial<T>) => {\n\t\tconst curr = atom.get()\n\t\tconst next = { ...curr, ...value }\n\t\tconst final = transform?.(atom.get(), atom.get()) ?? next\n\t\tatom.set(final)\n\t}\n\n\treturn Object.defineProperties(\n\t\t{} as T,\n\t\tObject.keys(atom.get()).reduce((acc, key) => {\n\t\t\tacc[key as keyof T] = computed(atom, key, {\n\t\t\t\tget() {\n\t\t\t\t\treturn atom.get()[key as keyof T]\n\t\t\t\t},\n\t\t\t\tset(value: T[keyof T]) {\n\t\t\t\t\tupdate({ [key]: value } as any)\n\t\t\t\t},\n\t\t\t})\n\t\t\treturn acc\n\t\t}, {} as { [key in keyof T]: PropertyDescriptor })\n\t)\n}\n"],
  "mappings": "AAAA,SAAe,gBAAgB;AAExB,SAAS,eACf,MACA,WACI;AACJ,QAAM,SAAS,CAAC,UAAsB;AACrC,UAAM,OAAO,KAAK,IAAI;AACtB,UAAM,OAAO,EAAE,GAAG,MAAM,GAAG,MAAM;AACjC,UAAM,QAAQ,YAAY,KAAK,IAAI,GAAG,KAAK,IAAI,CAAC,KAAK;AACrD,SAAK,IAAI,KAAK;AAAA,EACf;AAEA,SAAO,OAAO;AAAA,IACb,CAAC;AAAA,IACD,OAAO,KAAK,KAAK,IAAI,CAAC,EAAE,OAAO,CAAC,KAAK,QAAQ;AAC5C,UAAI,GAAc,IAAI,SAAS,MAAM,KAAK;AAAA,QACzC,MAAM;AACL,iBAAO,KAAK,IAAI,EAAE,GAAc;AAAA,QACjC;AAAA,QACA,IAAI,OAAmB;AACtB,iBAAO,EAAE,CAAC,GAAG,GAAG,MAAM,CAAQ;AAAA,QAC/B;AAAA,MACD,CAAC;AACD,aAAO;AAAA,IACR,GAAG,CAAC,CAA6C;AAAA,EAClD;AACD;",
  "names": []
}
