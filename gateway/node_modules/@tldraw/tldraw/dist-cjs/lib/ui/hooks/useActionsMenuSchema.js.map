{
  "version": 3,
  "sources": ["../../../../src/lib/ui/hooks/useActionsMenuSchema.tsx"],
  "sourcesContent": ["import { Editor, useEditor, useValue } from '@tldraw/editor'\nimport React, { useMemo } from 'react'\nimport {\n\tTLUiMenuSchema,\n\tmenuItem,\n\tuseAllowGroup,\n\tuseAllowUngroup,\n\tuseThreeStackableItems,\n} from './menuHelpers'\nimport { useActions } from './useActions'\nimport { useBreakpoint } from './useBreakpoint'\nimport { useHasLinkShapeSelected } from './useHasLinkShapeSelected'\n\n/** @public */\nexport type TLUiActionsMenuSchemaContextType = TLUiMenuSchema\n\n/** @internal */\nexport const ActionsMenuSchemaContext = React.createContext({} as TLUiActionsMenuSchemaContextType)\n\n/** @public */\nexport type ActionsMenuSchemaProviderProps = {\n\toverrides?: (\n\t\teditor: Editor,\n\t\tschema: TLUiActionsMenuSchemaContextType,\n\t\thelpers: {\n\t\t\tactions: ReturnType<typeof useActions>\n\t\t\toneSelected: boolean\n\t\t\ttwoSelected: boolean\n\t\t\tthreeSelected: boolean\n\t\t}\n\t) => TLUiActionsMenuSchemaContextType\n\tchildren: any\n}\n\n/** @internal */\nexport const ActionsMenuSchemaProvider = ({\n\toverrides,\n\tchildren,\n}: ActionsMenuSchemaProviderProps) => {\n\tconst editor = useEditor()\n\tconst actions = useActions()\n\n\tconst selectedCount = useValue('selected count', () => editor.getSelectedShapeIds().length, [\n\t\teditor,\n\t])\n\n\tconst oneSelected = selectedCount > 0\n\tconst twoSelected = selectedCount > 1\n\tconst threeSelected = selectedCount > 2\n\tconst threeStackableItems = useThreeStackableItems()\n\tconst allowGroup = useAllowGroup()\n\tconst allowUngroup = useAllowUngroup()\n\tconst showEditLink = useHasLinkShapeSelected()\n\tconst breakpoint = useBreakpoint()\n\tconst isZoomedTo100 = useValue('zoom is 1', () => editor.getZoomLevel() === 1, [editor])\n\n\tconst actionTLUiMenuSchema = useMemo<TLUiMenuSchema>(() => {\n\t\tconst results = [\n\t\t\tmenuItem(actions['align-left'], { disabled: !twoSelected }),\n\t\t\tmenuItem(actions['align-center-horizontal'], { disabled: !twoSelected }),\n\t\t\tmenuItem(actions['align-right'], { disabled: !twoSelected }),\n\t\t\tmenuItem(actions['stretch-horizontal'], { disabled: !twoSelected }),\n\t\t\tmenuItem(actions['align-top'], { disabled: !twoSelected }),\n\t\t\tmenuItem(actions['align-center-vertical'], { disabled: !twoSelected }),\n\t\t\tmenuItem(actions['align-bottom'], { disabled: !twoSelected }),\n\t\t\tmenuItem(actions['stretch-vertical'], { disabled: !twoSelected }),\n\t\t\tmenuItem(actions['distribute-horizontal'], { disabled: !threeSelected }),\n\t\t\tmenuItem(actions['distribute-vertical'], { disabled: !threeSelected }),\n\t\t\tmenuItem(actions['stack-horizontal'], { disabled: !threeStackableItems }),\n\t\t\tmenuItem(actions['stack-vertical'], { disabled: !threeStackableItems }),\n\t\t\tmenuItem(actions['send-to-back'], { disabled: !oneSelected }),\n\t\t\tmenuItem(actions['send-backward'], { disabled: !oneSelected }),\n\t\t\tmenuItem(actions['bring-forward'], { disabled: !oneSelected }),\n\t\t\tmenuItem(actions['bring-to-front'], { disabled: !oneSelected }),\n\t\t\tbreakpoint < 5\n\t\t\t\t? menuItem(actions['zoom-to-100'], { disabled: !!isZoomedTo100 })\n\t\t\t\t: menuItem(actions['rotate-ccw'], { disabled: !oneSelected }),\n\t\t\tmenuItem(actions['rotate-cw'], { disabled: !oneSelected }),\n\t\t\tmenuItem(actions['edit-link'], { disabled: !showEditLink }),\n\t\t\tallowGroup\n\t\t\t\t? menuItem(actions['group'], { disabled: !twoSelected })\n\t\t\t\t: allowUngroup\n\t\t\t\t? menuItem(actions['ungroup'])\n\t\t\t\t: menuItem(actions['group'], { disabled: !twoSelected }),\n\t\t]\n\n\t\tif (overrides) {\n\t\t\treturn overrides(editor, results, { actions, oneSelected, twoSelected, threeSelected })\n\t\t}\n\n\t\treturn results\n\t}, [\n\t\teditor,\n\t\tisZoomedTo100,\n\t\tallowGroup,\n\t\toverrides,\n\t\tactions,\n\t\toneSelected,\n\t\ttwoSelected,\n\t\tthreeSelected,\n\t\tthreeStackableItems,\n\t\tallowUngroup,\n\t\tshowEditLink,\n\t\tbreakpoint,\n\t])\n\n\treturn (\n\t\t<ActionsMenuSchemaContext.Provider value={actionTLUiMenuSchema}>\n\t\t\t{children}\n\t\t</ActionsMenuSchemaContext.Provider>\n\t)\n}\n\n/** @public */\nexport function useActionsMenuSchema(): TLUiMenuSchema {\n\tconst ctx = React.useContext(ActionsMenuSchemaContext)\n\n\tif (!ctx) {\n\t\tthrow new Error('useActionsMenuSchema must be used inside of a ActionsMenuSchemaProvider.')\n\t}\n\n\treturn ctx\n}\n"],
  "mappings": "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",
  "names": ["React"]
}
