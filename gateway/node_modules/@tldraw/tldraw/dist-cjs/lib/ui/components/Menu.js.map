{
  "version": 3,
  "sources": ["../../../../src/lib/ui/components/Menu.tsx"],
  "sourcesContent": ["import { Editor, useEditor } from '@tldraw/editor'\nimport * as React from 'react'\nimport { TLUiMenuChild } from '../hooks/menuHelpers'\nimport { useBreakpoint } from '../hooks/useBreakpoint'\nimport { useMenuSchema } from '../hooks/useMenuSchema'\nimport { useReadonly } from '../hooks/useReadonly'\nimport { useTranslation } from '../hooks/useTranslation/useTranslation'\nimport { LanguageMenu } from './LanguageMenu'\nimport { Button } from './primitives/Button'\nimport * as M from './primitives/DropdownMenu'\nimport { Kbd } from './primitives/Kbd'\n\nexport const Menu = React.memo(function Menu() {\n\tconst msg = useTranslation()\n\n\treturn (\n\t\t<M.Root id=\"main menu\">\n\t\t\t<M.Trigger>\n\t\t\t\t<Button\n\t\t\t\t\ttype=\"icon\"\n\t\t\t\t\tclassName=\"tlui-menu__trigger\"\n\t\t\t\t\tdata-testid=\"main.menu\"\n\t\t\t\t\ttitle={msg('menu.title')}\n\t\t\t\t\ticon=\"menu\"\n\t\t\t\t\tsmallIcon\n\t\t\t\t/>\n\t\t\t</M.Trigger>\n\t\t\t<M.Content alignOffset={0} sideOffset={6}>\n\t\t\t\t<MenuContent />\n\t\t\t</M.Content>\n\t\t</M.Root>\n\t)\n})\n\nfunction MenuContent() {\n\tconst editor = useEditor()\n\tconst msg = useTranslation()\n\tconst menuSchema = useMenuSchema()\n\tconst breakpoint = useBreakpoint()\n\tconst isReadonly = useReadonly()\n\n\tfunction getMenuItem(\n\t\teditor: Editor,\n\t\titem: TLUiMenuChild,\n\t\tparent: TLUiMenuChild | null,\n\t\tdepth: number\n\t) {\n\t\tif (!item) return null\n\t\tswitch (item.type) {\n\t\t\tcase 'custom': {\n\t\t\t\tif (isReadonly && !item.readonlyOk) return null\n\n\t\t\t\tif (item.id === 'LANGUAGE_MENU') {\n\t\t\t\t\treturn <LanguageMenu key=\"item\" />\n\t\t\t\t}\n\n\t\t\t\treturn null\n\t\t\t}\n\t\t\tcase 'group': {\n\t\t\t\tif (isReadonly && !item.readonlyOk) return null\n\n\t\t\t\treturn (\n\t\t\t\t\t<M.Group\n\t\t\t\t\t\tsize={\n\t\t\t\t\t\t\tdepth <= 1\n\t\t\t\t\t\t\t\t? 'medium'\n\t\t\t\t\t\t\t\t: breakpoint < 3 || (parent?.type === 'submenu' && depth > 2)\n\t\t\t\t\t\t\t\t? 'tiny'\n\t\t\t\t\t\t\t\t: 'medium'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t>\n\t\t\t\t\t\t{item.children.map((child) => getMenuItem(editor, child, item, depth + 1))}\n\t\t\t\t\t</M.Group>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'submenu': {\n\t\t\t\tif (isReadonly && !item.readonlyOk) return null\n\n\t\t\t\treturn (\n\t\t\t\t\t<M.Sub id={`main menu ${parent ? parent.id + ' ' : ''}${item.id}`} key={item.id}>\n\t\t\t\t\t\t<M.SubTrigger label={item.label} data-testid={`menu-item.${item.id}`} />\n\t\t\t\t\t\t<M.SubContent sideOffset={-4} alignOffset={-1}>\n\t\t\t\t\t\t\t{item.children.map((child) => getMenuItem(editor, child, item, depth + 1))}\n\t\t\t\t\t\t</M.SubContent>\n\t\t\t\t\t</M.Sub>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'item': {\n\t\t\t\tif (isReadonly && !item.readonlyOk) return null\n\n\t\t\t\tconst { id, checkbox, menuLabel, label, onSelect, kbd } = item.actionItem\n\t\t\t\tconst labelToUse = menuLabel ?? label\n\t\t\t\tconst labelStr = labelToUse ? msg(labelToUse) : undefined\n\n\t\t\t\tif (checkbox) {\n\t\t\t\t\t// Item is in a checkbox group\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<M.CheckboxItem\n\t\t\t\t\t\t\tkey={id}\n\t\t\t\t\t\t\tonSelect={() => onSelect('menu')}\n\t\t\t\t\t\t\ttitle={labelStr ? labelStr : ''}\n\t\t\t\t\t\t\tchecked={item.checked}\n\t\t\t\t\t\t\tdisabled={item.disabled}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{labelStr && <span className=\"tlui-button__label\">{labelStr}</span>}\n\t\t\t\t\t\t\t{kbd && <Kbd>{kbd}</Kbd>}\n\t\t\t\t\t\t</M.CheckboxItem>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t// Item is a button\n\t\t\t\treturn (\n\t\t\t\t\t<M.Item\n\t\t\t\t\t\ttype=\"menu\"\n\t\t\t\t\t\tkey={id}\n\t\t\t\t\t\tdata-testid={`menu-item.${item.id}`}\n\t\t\t\t\t\tkbd={kbd}\n\t\t\t\t\t\tlabel={labelToUse}\n\t\t\t\t\t\tonClick={() => onSelect('menu')}\n\t\t\t\t\t\tdisabled={item.disabled}\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n\n\treturn <>{menuSchema.map((item) => getMenuItem(editor, item, null, 0))}</>\n}\n"],
  "mappings": "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",
  "names": ["Menu", "editor"]
}
